#!/usr/bin/env ruby

require 'fileutils'

basedir = File.expand_path(File.dirname(__FILE__) + "/..")
FileUtils.mkdir_p '/etc/cloudscopes/metric_definition.d'
FileUtils.mkdir_p '/etc/cloudscopes/plugin.d'
FileUtils.mkdir_p '/var/log/cloudscopes/plugins'
FileUtils.cp "#{basedir}/config/cron.config", '/etc/cron.d/cloudscopes-monitoring'
FileUtils.cp "#{basedir}/config/monitoring.yaml", '/etc/cloudscopes/monitor.conf'
FileUtils.cp "#{basedir}/config/default_metrics.yaml",
    '/etc/cloudscopes/metric_definition.d/default.yaml'
FileUtils.cp "#{basedir}/config/logrotate", '/etc/logrotate.d/cloudscopes'
FileUtils.chmod 0600, '/etc/cron.d/cloudscopes-monitoring'
